<div align="center">
    <h1 align="center">Csti</h1>
    <h3>Отправляйте задачи за одну команду.</h3>
</div>

<br/>

Унифицированный интерфейс командной строки для взаимодействия с контест системами.

## Поддерживаемые системы

- **Contest solutions**: не протестировано
- **Ejudge**: поддерживаемая версия для ВМК 2 курс

## Быстрый старт

### Установка 

### 1. Установка Nix
Nix - пакетный менеджер, с возможностью создания дев шеллов, и установки программ на прямую с github.


Linux:
```shell
sudo $ sh <(curl -L https://nixos.org/nix/install) --daemon
```
MacOS:
```shell
sh <(curl -L https://nixos.org/nix/install)
```

Подробности смотреть на [офф. странице nixos](https://nixos.org/download/#nix-install-linux)

### 2. Подключение nix flakes
```shell
sudo echo "experimental-features = nix-command flakes" >> /etc/nix/nix.conf
```

### Установка csti
Исполнение следующих комманд следует делать в директории где вы будете решать контесты(или перенесите фалйы flake.nix и flake.lock в необходимую директорию).

```shell
nix flake init -t github:Gadzet005/csti#c-template # Получаем шаблон дев шела.
nix flake update # Обновления(необходимо при первом запуске).
nix develop # Запуск дев шела.
```

Для любителей fish/zsh и прочих шелов, рекомендую использовать комманду ```nix develop -c shell```, либо отредактировать "flake.nix".

## Настройка

```shell
csti configure -g
```

### Организация хранилища

Csti автоматически создает директорию контеста и шаблонны файлов с задачами после комманды ```csti contest select```.

"#" в названии отвечает, за место, где будет расположен порядковый номер.

- Директория архивации: место куда/откуда будут архивироваться/разархивироваться контест после ```csti contest select```, значение "./" - контесты не архивируются.
- Директория выбранного контеста: название папочки с контестом.
- Шаблон названия задач: очевидно!

Пример организации файлов(по умолчанию):
```
.
├── contest6
│   ├── task1.c
│   ├── task2.c
│   ├── task3.c
│   ├── task4.c
│   └── task5.c
├── contest7
│   ├── task1.c
│   ├── task2.c
│   ├── task3.c
│   ├── task4.c
│   └── task5.c
├── flake.lock
└── flake.nix
```

### Доп. функции
Все необходимые зависимости атоматически ставятся при запуске дев шела(clang-format, make, w3m)

- Авто выбор последней сохраненной задачи: csti автоматически сканирует директорию выбранного контеста и выбирает последний сохраненный файла, как задачу.
- Авто тесты: не поддерживается в Ejudge, требует установленного gcc.
- Авто форматирование: перед отправкой задача будет автоматически форматироваться в соответствии с код-стайлом, необходим clang-format.


## Краткий гид по коммандам

```shell
csti init # Инициализирует дирикторию для работы с контестом.
csti configure # Настраивает локальный конфиг(который генерируется с csti init), с флагом "-g", настраивает глобальный конфиг.

# Contest
csti contest info # Информация о выбраном контесте.
csti contest select # Выбрать контест.

# Task
csti task info # Показать всю информацию о задаче.
csti task info -c | w3m -T text/html # Вывести условие задачи в консольный браузер w3m.
csti task select # Выбрать задачу, работает только при отключенном авто выборе.
csti task send # Отправить задачу на проверку.
```

У всех подкоманд task можно передеть параметр id(опционально), и тогда будет производиться оперция не с выбранной задачей, а с задачей с указанным id. Аналогично ```csti contest select id```.

Примеры:
```shell
csti task info 5 # Выведет информацию о 5ой задаче выбранного контеста
csti contest select 6 # Выберет 6ой контест.
```

Также у каждой из подкоманд свой help, там более детальная информация о коммандах.
Примеры:
```shell
csti task --help
csti task info --help 
csti contest select --help
```
